# WASD

<div align="center">
<img width="329" alt="image" src="./logo.png">
</div>

## ✨ 프로젝트 소개

###  게임 파트너 🎮 매칭 및 실시간 통화 🎧 서비스 입니다!!
1. **원하는 게임과 선호 스타일을 입력하세요!**  
   저희가 비슷한 관심사를 가진 유저를 추천해줄게요! <br>
   자세히 입력할수록 더 잘 맞는 파트너를 추천해드려요 🫡
2. **마음에 맞는 유저끼리 그룹을 형성하세요!**  
   그룹내에서 자유롭게 서로 통화하고 서로의 생각을 공유해보세요! <br>
   실시간으로 이루어지는 통화와 함께 그룹끼리 재밌게 게임을 할 수 있어요!

## 🔍 주요 기능
- `보이스 채팅` 그룹 내에서 서로 대화를 주고받으면서 게임할 수 있어요.
- `화면 공유` 지금 진행되는 게임 또는 화면을 그룹끼리 공유할 수 있어요.
- `소셜 로그인` **카카오톡 아이디**만 있다면 누구나 쉽게 가입할 수 있어요.
- `유저 추천` **입력하신 정보** 를 토대로 잘 맞을 것 같은 유저를 추천해드려요.
- `그룹 가입` **마음이 맞는 유저**끼리 그룹을 형성해서 같이 즐기세요.

[//]: # (# Game Partner Matching & Real-Time Voice Chat Service)
## 📆 프로젝트 기간
**2024.09.00 ~ 2024.??.??**

## 🌐 배포 주소
 **개발 버전** : [http://~~~.com](http://~~~.com) 


## 📒 기술스택

#### FRONT-END
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=black"/> + ...

#### BACK-END
<img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"/>  + ...

## 🧱 ERD
![Trys-ketch-ERD](https://user-images.githubusercontent.com/116439064/216889472-47c44c0d-f751-499c-9af7-94f8645f0ad1.png)

<br/>

## 🏗️ 서비스 아키텍처
![서비스 아키텍쳐](https://user-images.githubusercontent.com/116439064/217725641-eb30cbce-c3eb-493d-a274-22f9d85d007b.png)


## 화면 구성 📺
| 메인 페이지  |  페이지   |
| :-------------------------------------------: | :------------: |
|  <img width="329" src="./logo.png"/> |   <img width="329" src="./logo.png"/>|  
| 페이지   |  페이지   |  
|  <img width="329" src="./logo.png"/> |   <img width="329" src="./logo.png"/>|  


## 🤔️ 기술적 의사 결정
<details>
<summary>사용된 기술을 선택한 이유와 근거</summary>

| 요구 사항| 선택지                                                     |핵심 기술을 선택한 이유 및 근거|
|:---|:--------------------------------------------------------|:---|
| WebRTC를 이용한<br/>사용자 음성 연결 | -Mesh(p2p)</br>- SFU                                    |- SFU는 하나의 서버를 더 구축해야하기 때문에 프로젝트의 규모에 맞지 않음<br/>- 영상 없이 음성통신만 구현하면 되기 때문에 클라이언트의 부하가 심하지 않다고 판단</br>- Mesh방식의 코드 샘플이 가장 많아 정보를 찾아보기 편했음</br>|

</details>

<br/>

## 🛠️ 트러블슈팅
<details>
<summary>문제가 발생했을 때 우리는 이렇게 해결했습니다.</summary>

### webRTC 연결 관련 이슈
|진행 순서| 내용|
|:---|:---|
| 😱 문제 |미디어 스트림을 접근 권한을 허가 혹은 거부하지 않으면 소켓이 연결되지 않아 게임을 제대로 진행이<br/>불가능하다.<br/>내 소리를 다른 사람은 들을 수 없으나 나는 다른 사람의 소리를 들을 수 있는 문제가 있음|
|🤔 원인|미디어 스트림 접근 권한을 요청할 때 코드의 흐름이 정지되기 때문에 이후 코드가 실행되지 않으므로<br/>소켓 연결이 되지 않음<br/>미디어 스트림 권한이 처리되지 않았을 때 다른 사용자가 rtc연결을 요청시 나의 미디어 스트림이<br/>undefined 상태이므로 상대의 음성은 들리나 나의 음성이 전달되지 않음|
|😭 시도| • getUserMedia()를 별개의 useEffect로 분리하여 소켓과 rtc를 연결하는 로직에 병렬적으로 처리되게 구현<br/>이 경우 미디어스트림을 허가하기 전에 rtc연결을 요청하므로 내 로컬스트림이 undefined 인 문제가 발생함<br/>• getUserMedia()함수를 소켓 연결 이후에 호출하도록 변경함. 그러나 이 경우 다른 사용자가 rtc연결을<br/>요청했을 때마이크 접근 권한을 허가하거나 거부하지 않은 상태이면 나의 미디어스트림이 undefined 인<br/>경우가 발생하므로 나의 말을 다른 사람이 들을 수가 없음     |
|😄 해결| • getUserMedia()함수를 별개의 useEffect를 이용해 병렬적으로 처리하는 로직은 그대로 둠<br/>• 요청을 받아 rtc연결을 실행하거나, 내가 새로운 rtc연결을 시도하고자 하는 경우 사용자가 마이크 사용을<br/>허가/거부하지 않은 상태면 반복문과 함께 Promise, setTimeOut으로 구현한 sleep함수를 이용해 코드의<br/>흐름을 막음<br/>• 사용자가 마이크 사용을 허가한 경우 그대로 연결을 진행함, 사용을 거부한 경우 본인의 마이크는 사용이<br/>불가능하지만 사용자가 의도한 것이므로 특별히 예외처리하지 않음 |


</details>

<br/>

## 개발자 소개

|                                       이유진                                        |                                       강성현                                        |                                                                                                            
|:--------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------:|  
| <img width="160px" src="https://avatars.githubusercontent.com/u/81798918?v=4" /> | <img width="160px" src="https://avatars.githubusercontent.com/u/83094369?v=4" /> |                   
|                      [@y-00jin](https://github.com/y-00jin)                      |                       [@keartt](https://github.com/keartt)                       |
|                                        설명                                        |                                        설명                                        |
